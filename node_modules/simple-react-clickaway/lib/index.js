"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useClickAway = void 0;
var react_1 = require("react");
/**
 * Listens for clicks outside the element.
 * @param ref Target html element ref.
 * @param onClickAway Click away callback.
 * @return Listener disable and enable function.
 */
var useClickAway = function (ref, onClickAway) {
    var _a = react_1.useState(false), disabled = _a[0], setDisabled = _a[1];
    var disable = function () { return setDisabled(true); };
    var enable = function () { return setDisabled(false); };
    var onAway = function (e) {
        if (ref.current && !ref.current.contains(e.target))
            onClickAway();
    };
    var events = ['mousedown', 'pointerdown', 'touchstart'];
    var addEventListeners = function () { return events.forEach(function (event) { return document.addEventListener(event, onAway); }); };
    var removeEventListeners = function () { return events.forEach(function (event) { return document.removeEventListener(event, onAway); }); };
    react_1.useEffect(function () {
        if (!ref || !ref.current)
            return;
        if (disabled)
            removeEventListeners();
        else
            addEventListeners();
        return removeEventListeners;
    }, [ref.current, disabled]);
    return { disable: disable, enable: enable };
};
exports.useClickAway = useClickAway;
